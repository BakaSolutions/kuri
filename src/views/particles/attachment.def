<div class="attachment">
  {{? file.thumb }}
    <a class="thumb"
       href="{{=it.foxtan.upload}}{{!file.path}}"
       target="_blank"
       onclick="media.prepare(event, '{{=file.mime}}', '{{!file.name}}')"
       style="background-image: url({{=it.foxtan.thumb}}{{!file.thumb.path}}); width: {{!file.thumb.width}}px; height: {{!file.thumb.height}}px"></a>

    <div class="info">
      <span>{{? file.size < 1048576}}{{! (file.size / 1024).toFixed(1)}} KiB{{?? }}{{!(file.size / 1048576).toFixed(2)}} MiB{{? }}</span>
      {{? file.duration }}<span class="duration">{{!file.duration}}</span>{{?}}
      <a class="dlLink material-icons" href="{{=it.foxtan.upload}}{{!file.path}}" download="{{!file.name}}">save_alt</a>
    </div>
  {{?? }}
    <a class="unpreviewable"
       href="{{=it.foxtan.upload}}{{!file.path}}"
       target="_blank"
       {{? file.mime.split('/')[0] === "audio" }}
         onclick="loadAudio(event, '{{=it.foxtan.upload}}{{!file.path}}', '{{!file.name}}')"
       {{?? ["image", "video"].includes(file.mime.split('/')[0]) }}
         onclick="media.prepare(event, '{{=file.mime}}', '{{!file.name}}')"
       {{?}}
    >{{!file.name}} <span>({{!(file.size / 1048576).toFixed(2)}} Mb)</span></a>
  {{? }}
</div>
