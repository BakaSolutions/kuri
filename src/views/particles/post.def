<article class="post" data-number="{{!post.number}}" data-board="{{!it.board.name}}" data-thread="{{!post.threadNumber}}" data-op="{{! post.number == post.threadNumber}}">
	<div class="postDetails">
		<!-- Удаление поста -->
		<input type="checkbox" id="delete-{{!it.board.name}}:{{!post.number}}" name="post" value="{{!it.board.name}}:{{!post.number}}" form="deletePosts" hidden>
		<label for="delete-{{!it.board.name}}:{{!post.number}}" class="material-icons jsOnly" onclick="activatePostRemovalWidget()">delete</label>

		<!-- Сажа -->
		{{? post.sage}}
			<span class="material-icons">arrow_downward</span>
		{{? }}
		<!-- Закреплённый тред -->
		{{? (post.number == post.threadNumber) && typeof thread !== 'undefined' && thread.pinned}}
			<span class="material-icons">pin_drop</span>
		{{? }}

		<!-- Рефлинк -->
		<a class="refLink" href="/{{!it.board.name}}/res/{{!post.threadNumber}}.html{{? post.number != post.threadNumber}}#{{!post.number}}">{{?? }}">{{? }}
			<span class="subject">{{? post.subject}}{{!post.subject}}{{?? }}{{!it.board.defaultUsername || ''}}{{? }}</span> #{{!post.number}}

			{{? post.op}}
				<span class="opMark"> (OP)</span>
			{{? }}
		</a>

		<a class="jumpToPost" name="{{!post.number}}"></a>

		<!-- Дата -->
		<time title="{{!post.createdAt}}">{{!post.formatted_date}}</time>

		<!-- Меню -->
		<span class="material-icons jsOnly" onclick="openPostMenu(event, this.parentNode.parentNode.dataset)">menu</span>

		<!-- Быстрый ответ -->
		<span class="material-icons jsOnly" onclick="quickReply(this)">reply</span>

		<!-- Закладки -->
		<span class="star material-icons jsOnly" onclick="toggleStarMark(this.parentNode.parentNode.dataset)">star</span>
	</div>
	<div class="postBody">
		{{? Array.isArray(post.files) && post.files.length}}
			<div class="thumbnails">
				{{~post.files.filter((file) => /^(image|video)/.test(file.mime)) :file}}
					{{#def['particles/attachment']}}
				{{~ }}
			</div>

			<div class="attachments">
				{{~post.files.filter((file) => !/^(image|video)/.test(file.mime)) :file}}
					{{#def['particles/attachment']}}
				{{~ }}
			</div>
		{{? }}
		<div class="postText">
			{{=post.text}}

			{{? post.replies }}
				<div class="postReplies">Ответы: {{!post.replies}}</div>
			{{? }}
		</div>
	</div>
</article>
